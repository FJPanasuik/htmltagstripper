<!DOCTYPE html>
<html>
<head>
     <title>HTML Stripper</title>
     <link rel="stylesheet" href="style.css">
     <script src="http://code.jquery.com/jquery-2.0.0.min.js" type="text/javascript"></script>
	 <script type="text/javascript" src="tags.js"></script>
     <link href='http://fonts.googleapis.com/css?family=Sirin+Stencil' rel='stylesheet' type='text/css'>
	 <link href='http://fonts.googleapis.com/css?family=Patrick+Hand+SC' rel='stylesheet' type='text/css'>
	 <link href='http://fonts.googleapis.com/css?family=Source+Code+Pro' rel='stylesheet' type='text/css'>



</head>

<body>
<a href="https://github.com/hardiksondagar/htmltagstripper.git"><img style="position: absolute; top: 0; left: 0; border: 0;" src="https://s3.amazonaws.com/github/ribbons/forkme_left_orange_ff7600.png" alt="Fork me on GitHub"></a>
<header>

<span class="logo">HTML <font color="#FE8315">&lt;tag&gt;</font> Stripper <span></span></span>v 1.0
<a href="https://twitter.com/intent/user?screen_name=hardiksondagar"><span class="nav" id="follow"></span></a>
<span class="nav" id="about">About</span>
<a href="https://github.com/hardiksondagar/htmltagstripper.git"><span class="nav" id="fork">Fork</span></a>

<a href="https://github.com/hardiksondagar/htmltagstripper/archive/master.zip"><span class="nav">Download</span></a>


<div class="shadow"><br/></div>

</header>
<section>
<div class="label" >Input:</div>
<!--<div class="codedata" contentEditable="true" >dfbdf</div>-->
<textarea class="codedata" id="Input" rows="10" title="Input Code" name="inputcode"  placeholder="Past your input Code here"></textarea>
<div class="shadow" style="width:954px;position:relative;bottom:5px;height:10px"></div>
<input type="button" class="btn" id="convert" value="Convert"/>
<br/>
<input name="tags" type="text" value="" style="display: none;">

<br/>
<div class="label" >Output:</div>
<div class="codedata" id="test" contentEditable="true"  style="display:none;opacity:0;background:white;"></div>
<textarea class="codedata"  id="Output" rows="10" title="Output Code" name="inputcode"  style="display:none;opacity:0;" placeholder="Output"></textarea>
<div class="shadow" style="width:954px;position:relative;height:10px;display:none;bottom:0;"></div>

</section>

<footer>
Copyright &copy; 2013 htmltagstripper.com.  All rights reserved.
</footer>
<script type="text/javascript">
(function($){
    $(document).ready(function() {
        $('input[name=tags]').tagger();
    });
})(jQuery);

</script>
<script>
$('#convert').on('click',function()
{
	
		
		var tags_exclude_list=$(".tag");
		var tags_exclude_regEx='';
		$.each( tags_exclude_list, function(index, item){
				tags_exclude_regEx=(index==0)?$(item).html():tags_exclude_regEx+'|'+$(item).html();
		});
		
		$('#Output').val('');

		//$('#test').css({'display':'block','opacity':'0'});	
//		$('#test').html($('#Input').val());
		var divv = document.createElement('div');
		divv.innerHTML=$('#Input').val();
//		$('#test').find('style').remove();
//		$('#test').find('iframe').remove();
//		$('#test').find('style').remove();

		//$('#test').css({'display':'block','opacity':'1'});
		//$('#test + .shadow').css({'display':'block','margin':'0'});
		

		var regex_final=/<(?!\s*\/?(a|b|c)\b)[^>]+>/ig;
		
		var regex =new RegExp("<(?!\\s*\\/?("+tags_exclude_regEx+")\\b)[^>]+>","gi");
		console.log(regex);
		console.log(regex_final);
//		var regex =(\<)(?!br(\s|\/|\>))(.*?\>);
//		var body = $('#test').html();
		 //var regex = /(?!a|br|/a)[^>]+;
		var body = divv.innerHTML;
		var result = body.replace(regex, "");


		$('#Output').val(result);

		if($('#Output').val()=='')
		{
			$('#Output').css({'display':'none','opacity':'0'});
			$('#Output').fadeOut("10000");

 		}
		else
		{
			$('#Output').css({'display':'block','opacity':'1'});
			$('#Output').fadeIn("10000");
		}
		
	

})



	var link = document.createElement('link');
        link.type = 'image/x-icon';
    	link.rel = 'shortcut icon';
    	link.href = 'img/visible.png';
	document.getElementsByTagName('head')[0].appendChild(link);
	processing=1;


	
	var hidden, state, visibilityChange; 
	if (typeof document.hidden !== "undefined") 
	{
		hidden = "hidden";
		visibilityChange = "visibilitychange";
		state = "visibilityState";

	} 
	else if (typeof document.mozHidden !== "undefined") 
	{
		hidden = "mozHidden";
		visibilityChange = "mozvisibilitychange";
		state = "mozVisibilityState";
        

	}
	else if (typeof document.msHidden !== "undefined") 
	{
		hidden = "msHidden";
		visibilityChange = "msvisibilitychange";
		state = "msVisibilityState";
       

	}
	else if (typeof document.webkitHidden !== "undefined") 
	{
		hidden = "webkitHidden";
		visibilityChange = "webkitvisibilitychange";
		state = "webkitVisibilityState";


	}
	    document.addEventListener("visibilitychange", onchange);
        document.addEventListener("webkitvisibilitychange", onchange);
		document.addEventListener("msvisibilitychange", onchange);
		document.addEventListener("mozvisibilitychange", onchange);
   
	
	function onchange (evt) {
			
			
		link.href = 'img/visible.png';		
		document.title="Focus";
		if(document[state]!="visible")
		{ 
				console.log(document[state]);
				document.title="Blur";
				link.href = 'img/hidden.png';		
		}
		document.getElementsByTagName('head')[0].appendChild(link);


	 }

	


  $( ".codedata" ).mouseenter( function() {
	//	$( "section" ).css({'opacity':'0.3','z-index':'-1'});
      //  $( ".codedata" ).css({'opacity':'1','z-index':'999'});
    }).mouseleave( function() {
       // $( "body" ).css({'opacity':'1'});
    });;

</script>

</body>


</html>

